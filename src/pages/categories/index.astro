---
import FilterLayout from "@/layouts/FilterLayout.astro";
import { getCollection } from "astro:content";

const allPosts = await getCollection("posts");
const categoryCountMap = new Map();

allPosts.forEach((post) => {
  const category = post.data.category;
  if (categoryCountMap.has(category)) {
    categoryCountMap.set(category, categoryCountMap.get(category) + 1);
  } else {
    categoryCountMap.set(category, 1);
  }
});
---

<FilterLayout
  filterUrl="/categories"
  filterLabel="類別"
  countMap={categoryCountMap}
/>
